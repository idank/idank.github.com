<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
  <link href='http://fonts.googleapis.com/css?family=Cantarell' rel='stylesheet' type='text/css'>
  <meta http-equiv="X-UA-Compatible" content="">
  <title>refresh browser when html or css changes - aleph.nu</title>
  <meta name="description" content="">
  <meta name="author" content="Idan Kamara">

    <link rel="shortcut icon" href="/favicon.png">
  
    <link rel="stylesheet" href="/media/css/site.css">
  
      </head>
<body id="refresh-browser-html-changes">
  <div id="container">
            <div id="header">
          <img src="/media/images/aleph.png" height="120"/>
                      <ul id="navigation">
                          <li>
                <a title="Home Page" class="" href="/">
                    Home
                </a>
              </li>              <li>
                <a title="University" class="" href="/university.html">
                    University
                </a>
              </li>              <li>
                <a title="About" class="" href="/about.html">
                    About
                </a>
              </li>            </ul>          <div><h2 id="site-title"><span>Aleph.Nu</span><span id="title-suffix">ll</span></h2></div>
      </div> <!--! end of #header -->
                  <div class="content">
          <div class="title">
                <h2>refresh browser when html or css changes</h2>
    
    <ul class="footer">
            <li class="tags">
            <ul>
                            <li>
                    <a class="small" href="/blog/tags/bash.html">bash</a>
                </li>
                            <li>
                    <a class="small" href="/blog/tags/html.html">html</a>
                </li>
                            <li>
                    <a class="small" href="/blog/tags/vim.html">vim</a>
                </li>
                        </ul>
        </li>
                    <li class="date"><abbr class="timeago" title="2011-12-17 11:32:00">17 Dec 2011</abbr>, 17 Dec 2011
</li>
    </ul>
</div>

<p>If you work regularly with web pages you know how tedious it is to go back and forth between your editor and browser and hitting refresh to see the&nbsp;changes.</p>
<p>This shell script finds the browser window of a given <span class="caps">HTML</span> file and refreshes&nbsp;it:</p>
<pre><code>#!/bin/sh

windowtitle=$(sed -ne "s/&lt;title&gt;\(.*\)&lt;\/title&gt;/\1/p" "$1")

if [ $? != 0 ]; then
    echo "couldn't find &lt;title&gt; in file" $1 1&gt;&amp;2
    exit 1
fi

# get rid of leading/trailing whitespace
windowtitle=$(echo -n $windowtitle)

if [ -z "$windowtitle" ]; then
    echo "couldn't find &lt;title&gt; in file" $1 1&gt;&amp;2
    exit 1
fi

# oldid=$(xdotool getwindowfocus)
id=$(xdotool search -title "$windowtitle")

if [ $? != 0 ]; then
    echo 'window not found' 1&gt;&amp;2
    exit 1
fi

xdotool windowactivate $id
xdotool key F5 $id
# xdotool windowactivate $oldid
</code></pre>
<p>The first half of the script is basically just getting the &lt;title&gt; of the file so we can find the correct window to refresh. The rest is giving it focus and hitting&nbsp;F5.</p>
<p>The two commented lines are for those who have multiple monitors with the browser and editor visible at the same time. Then it makes sense to give focus back to the original window. Uncomment them if you&#8217;d like&nbsp;that.</p>
<p>Both of these snippets require <strong>xdotool</strong>, which can be found in any distro package manager (in Ubuntu/Debian <code>sudo apt-get install xdotool</code>).</p>
<p>This can be integrated into vim like&nbsp;this:</p>
<pre><code>autocmd FileType html noremap &lt;buffer&gt;&lt;silent&gt; K :update &lt;Bar&gt;
    \ execute 'silent !~/refresh.sh "%"'&lt;CR&gt;&lt;Esc&gt;
</code></pre>
<p>Putting this in your .vimrc and hitting <kbd>K</kbd> will save the current file and run the script, assuming it&#8217;s at <code>~/refresh.sh</code>.</p>      </div>
      </div> <!--! end of #container -->
  <div id="footer">
  </div>
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.js"></script>
  <script>window.jQuery || document.write('<script src="/media/js/libs/jquery-1.5.1.min.js">\x3C/script>')</script>
  <script src="/media/js/libs/jquery.timeago.js" type="text/javascript"></script>
  <script>
      jQuery(document).ready(function() {
        jQuery("abbr.timeago").timeago();
      });
  </script>
    <script src="/media/js/libs/highlight.pack.js" type="text/javascript"></script>
<script type="text/javascript">
        hljs.initHighlightingOnLoad();
</script>
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-28052058-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
    </body>
</html>